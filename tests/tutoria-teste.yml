# tutoria-teste.yml
config:
  target: "http://localhost:3000"
  processor: "./processador-tutoria.js"
  phases:
    - duration: 5
      arrivalRate: 1
      name: "Fase de aquecimento"
    - duration: 300  # 5 minutos
      arrivalRate: 2
      maxVusers: 3
      name: "Teste de carga"
  plugins:
    expect: {}
  http:
    timeout: 10
    pool: 5

scenarios:
  - name: "Escolha de tutores"
    flow:
      # Inicialização
      - function: "inicializarDados"
      
      # Verificar aluno
      - post:
          url: "/api/verificar-aluno"
          json:
            turma: "{{ turma }}"
            nome: "{{ nome }}"
          expect:
            - statusCode: 200
      
      # Pequena pausa para simular interação do usuário
      - think: 1
      
      # Salvar preferências
      - post:
          url: "/api/preferencias"
          json:
            turma: "{{ turma }}"
            nome: "{{ nome }}"
            preferencias: "{{ preferencias }}"
          afterResponse: "registrarResultado"
      
      # Intervalo entre alunos
      - think: 2